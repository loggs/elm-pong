<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Elm - Pong</title>
		<script type="text/javascript" src="src/client/elm.js"></script>
		<link href='//fonts.googleapis.com/css?family=Monofett' rel='stylesheet'>
		<link href='//fonts.googleapis.com/css?family=Faster One' rel='stylesheet'>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	</head>
	<body>
		<div id="main"></div>
		<canvas id="holdImage"></canvas>
		<script>
		    let node = document.getElementById('main');
		    let app = Elm.Main.embed(node);
		    app.ports.sendGameBoard.subscribe(function (gameAreaString) {
		    	let c = document.getElementById('holdImage')
		    	let ctx = c.getContext('2d')
		    	let DOMURL = window.URL || window.webkitURL || window;
		    	var img = new Image();
				let svg = new Blob([gameAreaString], {type: 'image/svg+xml'});
				let url = DOMURL.createObjectURL(svg);
				ctx.drawImage(img, 0, 0);
  				DOMURL.revokeObjectURL(url);
		    	console.log(ctx.getImageData(0, 0, 500, 500))
		    });
		</script>
	</body>
</html>
